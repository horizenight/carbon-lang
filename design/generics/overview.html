<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-design docs-doc-id-generics/overview">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-rc.1">
<title data-rh="true">Generics: Overview | Carbon Language</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://emlai.github.io/carbon-lang/design/generics/overview"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-design-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-design-current"><meta data-rh="true" property="og:title" content="Generics: Overview | Carbon Language"><meta data-rh="true" name="description" content="&lt;!--"><meta data-rh="true" property="og:description" content="&lt;!--"><link data-rh="true" rel="icon" href="/carbon-lang/img/carbon-logo.png"><link data-rh="true" rel="canonical" href="https://emlai.github.io/carbon-lang/design/generics/overview"><link data-rh="true" rel="alternate" href="https://emlai.github.io/carbon-lang/design/generics/overview" hreflang="en"><link data-rh="true" rel="alternate" href="https://emlai.github.io/carbon-lang/design/generics/overview" hreflang="x-default"><link rel="stylesheet" href="/carbon-lang/assets/css/styles.009a6ecf.css">
<link rel="preload" href="/carbon-lang/assets/js/runtime~main.256c0991.js" as="script">
<link rel="preload" href="/carbon-lang/assets/js/main.5fcc8113.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/carbon-lang/"><div class="navbar__logo"><img src="/carbon-lang/img/carbon-logo.png" alt="Carbon Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/carbon-lang/img/carbon-logo.png" alt="Carbon Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Carbon Language</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/carbon-lang/design">Design</a><a class="navbar__item navbar__link" href="/carbon-lang/spec">Spec</a><a class="navbar__item navbar__link" href="/carbon-lang/project">Project</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/carbon-language/carbon-lang" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/carbon-lang/design">Language design</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/carbon-lang/design/aliases">Aliases</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/carbon-lang/design/blocks_and_statements">Blocks and statements</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/carbon-lang/design/classes">Classes</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/carbon-lang/design/code_and_name_organization">Code and name organization</a><button aria-label="Toggle the collapsible sidebar category &#x27;Code and name organization&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/carbon-lang/design/control_flow">Control flow</a><button aria-label="Toggle the collapsible sidebar category &#x27;Control flow&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/carbon-lang/design/expressions">Expressions</a><button aria-label="Toggle the collapsible sidebar category &#x27;Expressions&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/carbon-lang/design/functions">Functions</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/carbon-lang/design/generics">Generics</a><button aria-label="Toggle the collapsible sidebar category &#x27;Generics&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/carbon-lang/design/generics/appendix-coherence">Carbon: alternatives to coherence</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/carbon-lang/design/generics/details">Generics: Details</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/carbon-lang/design/generics/goals">Generics: Goals</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/carbon-lang/design/generics/overview">Generics: Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/carbon-lang/design/generics/terminology">Generics: Terminology</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/carbon-lang/design/interoperability">Bidirectional interoperability with C/C++</a><button aria-label="Toggle the collapsible sidebar category &#x27;Bidirectional interoperability with C/C++&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/carbon-lang/design/lexical_conventions">Lexical conventions</a><button aria-label="Toggle the collapsible sidebar category &#x27;Lexical conventions&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/carbon-lang/design/metaprogramming">Metaprogramming</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/carbon-lang/design/name_lookup">Name lookup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/carbon-lang/design/naming_conventions">Naming conventions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/carbon-lang/design/pattern_matching">Pattern matching</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/carbon-lang/design/primitive_types">Primitive types</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/carbon-lang/design/templates">Templates</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/carbon-lang/design/tuples">Tuples</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/carbon-lang/design/type_inference">Type inference</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/carbon-lang/design/variables">Variables</a></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/carbon-lang/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/carbon-lang/design/generics"><span itemprop="name">Generics</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Generics: Overview</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Generics: Overview</h1><p>This document is a high-level description of Carbon&#x27;s generics design, with
pointers to other design documents that dive deeper into individual topics.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="table-of-contents">Table of contents<a class="hash-link" href="#table-of-contents" title="Direct link to heading">​</a></h2><ul><li><a href="#goals">Goals</a></li><li><a href="#summary">Summary</a></li><li><a href="#what-are-generics">What are generics?</a><ul><li><a href="#interfaces">Interfaces</a><ul><li><a href="#defining-interfaces">Defining interfaces</a></li><li><a href="#contrast-with-templates">Contrast with templates</a></li></ul></li><li><a href="#implementing-interfaces">Implementing interfaces</a><ul><li><a href="#accessing-members-of-interfaces">Accessing members of interfaces</a></li></ul></li><li><a href="#type-of-types">Type-of-types</a></li><li><a href="#generic-functions">Generic functions</a><ul><li><a href="#deduced-parameters">Deduced parameters</a></li><li><a href="#generic-type-parameters">Generic type parameters</a></li></ul></li><li><a href="#requiring-or-extending-another-interface">Requiring or extending another interface</a></li><li><a href="#combining-interfaces">Combining interfaces</a><ul><li><a href="#named-constraints">Named constraints</a></li><li><a href="#type-erasure">Type erasure</a></li></ul></li><li><a href="#adapting-types">Adapting types</a></li><li><a href="#interface-input-and-output-types">Interface input and output types</a><ul><li><a href="#associated-types">Associated types</a></li><li><a href="#parameterized-interfaces">Parameterized interfaces</a></li></ul></li><li><a href="#constraints">Constraints</a></li><li><a href="#parameterized-impls">Parameterized impls</a></li><li><a href="#operator-overloading">Operator overloading</a></li></ul></li><li><a href="#future-work">Future work</a></li><li><a href="#references">References</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="goals">Goals<a class="hash-link" href="#goals" title="Direct link to heading">​</a></h2><p>The goal of Carbon generics is to provide an alternative to Carbon (or C++)
templates. Generics in this form should provide many advantages, including:</p><ul><li>Function calls and bodies are checked independently against the function
signatures.</li><li>Clearer and earlier error messages.</li><li>Fast builds, particularly development builds.</li><li>Support for both static and dynamic dispatch.</li></ul><p>For more detail, see <a href="/carbon-lang/design/generics/goals">the detailed discussion of generics goals</a> and
<a href="/carbon-lang/design/generics/terminology">generics terminology</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="summary">Summary<a class="hash-link" href="#summary" title="Direct link to heading">​</a></h2><p>Summary of how Carbon generics work:</p><ul><li><em>Generics</em> are parameterized functions and types that can apply generally.
They are used to avoid writing specialized, near-duplicate code for similar
situations.</li><li>Generics are written using <em>interfaces</em> which have a name and describe
methods, functions, and other entities for types to implement.</li><li>Types must explicitly <em>implement</em> interfaces to indicate that they support
its functionality. A given type may implement an interface at most once.</li><li>Implementations may be part of the type&#x27;s definition, in which case you can
directly call the interface&#x27;s methods on those types. Or, they may be
external, in which case the implementation is allowed to be defined in the
library defining the interface.</li><li>Interfaces are used as the type of a generic type parameter, acting as a
<em>type-of-type</em>. Type-of-types in general specify the capabilities and
requirements of the type. Types define specific implementations of those
capabilities. Inside such a generic function, the API of the type is
<a href="/carbon-lang/design/generics/terminology#type-erasure">erased</a>, except for the names defined in the
type-of-type.</li><li><em>Deduced parameters</em> are parameters whose values are determined by the
values and (most commonly) the types of the explicit arguments. Generic type
parameters are typically deduced.</li><li>A function with a generic type parameter can have the same function body as
an unparameterized one. Functions can freely mix generic, template, and
regular parameters.</li><li>Interfaces can require other interfaces be implemented.</li><li>Interfaces can <a href="/carbon-lang/design/generics/terminology#extending-an-interface">extend</a> required
interfaces.</li><li>The <code>&amp;</code> operation on type-of-types allows you conveniently combine
interfaces. It gives you all the names that don&#x27;t conflict.</li><li>You may also declare a new type-of-type directly using
<a href="/carbon-lang/design/generics/terminology#named-constraints">&quot;named constraints&quot;</a>. Named constraints
can express requirements that multiple interfaces be implemented, and give
you control over how name conflicts are handled.</li><li>Alternatively, you may resolve name conflicts by using a qualified member
access expression to directly call a function from a specific interface
using a qualified name.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-are-generics">What are generics?<a class="hash-link" href="#what-are-generics" title="Direct link to heading">​</a></h2><p>Generics are a mechanism for writing parameterized code that applies generally
instead of making near-duplicates for very similar situations, much like C++
templates. For example, instead of having one function per type-you-can-sort:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">fn SortInt32Vector(a: Vector(i32)*) { ... }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn SortStringVector(a: Vector(String)*) { ... }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You might have one generic function that could sort any array with comparable
elements:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">fn SortVector(T:! Comparable, a: Vector(T)*) { ... }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The syntax above adds a <code>!</code> to indicate that the parameter named <code>T</code> is generic
and the caller will have to provide a value known at compile time.</p><p>Given an <code>i32</code> vector <code>iv</code>, <code>SortVector(i32, &amp;iv)</code> is equivalent to
<code>SortInt32Vector(&amp;iv)</code>. Similarly for a <code>String</code> vector <code>sv</code>,
<code>SortVector(String, &amp;sv)</code> is equivalent to <code>SortStringVector(&amp;sv)</code>. Thus, we can
sort any vector containing comparable elements using this single <code>SortVector</code>
function.</p><p>This ability to generalize makes <code>SortVector</code> a <em>generic</em>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="interfaces">Interfaces<a class="hash-link" href="#interfaces" title="Direct link to heading">​</a></h3><p>The <code>SortVector</code> function requires a definition of <code>Comparable</code>, with the goal
that the compiler can:</p><ul><li>completely type check a generic definition without information from where
it&#x27;s called.</li><li>completely type check a call to a generic with information only from the
function&#x27;s signature, and not from its body.</li></ul><p>In this example, then, <code>Comparable</code> is an <em>interface</em>.</p><p>Interfaces describe all the requirements needed for the type <code>T</code>. Given that the
compiler knows <code>T</code> satisfies those requirements, it can type check the body of
the <code>SortVector</code> function. This includes checking that the <code>Comparable</code>
requirement covers all of the uses of <code>T</code> inside the function.</p><p>Later, when the compiler comes across a call to <code>SortVector</code>, it can type check
against the requirements expressed in the function&#x27;s signature. Using only the
types at the call site, the compiler can check that the member elements of the
passed-in array satisfy the function&#x27;s requirements. There is no need to look at
the body of the <code>SortVector</code> function, since we separately checked that those
requirements were sufficient.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="defining-interfaces">Defining interfaces<a class="hash-link" href="#defining-interfaces" title="Direct link to heading">​</a></h4><p>Interfaces, then, have a name and describe methods, functions, and other
entities for types to implement.</p><p>Example:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">interface Comparable {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // `Less` is an associated method.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fn Less[me: Self](rhs: Self) -&gt; Bool;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Functions and methods may be given a default implementation by prefixing the
declaration with <code>default</code> and putting the function body in curly braces
<code>{</code>...<code>}</code> in place of the terminating <code>;</code> of the function declaration. To
prevent that implementation from being overridden, use <code>final</code> instead of
<code>default</code>.</p><p>Interfaces describe functionality, but not data; no variables may be declared in
an interface.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="contrast-with-templates">Contrast with templates<a class="hash-link" href="#contrast-with-templates" title="Direct link to heading">​</a></h4><p>Contrast these generics with a C++ template, where the compiler may be able to
do some checking given a function definition, but more checking of the
definition is required after seeing the call sites once all the
<a href="/carbon-lang/design/generics/terminology#instantiation">instantiations</a> are known.</p><p>Note: <a href="/carbon-lang/design/generics/terminology">Generics terminology</a> goes into more detail about the
<a href="/carbon-lang/design/generics/terminology#generic-versus-template-parameters">differences between generics and templates</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="implementing-interfaces">Implementing interfaces<a class="hash-link" href="#implementing-interfaces" title="Direct link to heading">​</a></h3><p>Interfaces themselves only describe functionality by way of method descriptions.
A type needs to <em>implement</em> an interface to indicate that it supports its
functionality. A given type may implement an interface at most once.</p><p>Consider this interface:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">interface Printable {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fn Print[me: Self]();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>interface</code> keyword is used to define a
<a href="/carbon-lang/design/generics/terminology#nominal-interfaces"><em>nominal interface</em></a>. That means that types
need to explicitly implement them, using an <code>impl</code> block, such as here:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">class Song {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Implementing `Printable` for `Song` inside the definition of `Song`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // without the keyword `external` means all names of `Printable`, such</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // as `F`, are included as a part of the `Song` API.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  impl as Printable {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Could use `Self` in place of `Song` here.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn Print[me: Song]() { ... }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Implement `Comparable` for `Song` without changing the API of `Song`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// using an `external impl` declaration. This may be defined in either</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// the library defining `Song` or `Comparable`.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">external impl Song as Comparable {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Could use either `Self` or `Song` here.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fn Less[me: Self](rhs: Self) -&gt; Bool { ... }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Implementations may be defined within the class definition itself or
out-of-line. Implementations may optionally be start with the <code>external</code> keyword
to say the members of the interface are not members of the class. Out-of-line
implementations must be external. External implementations may be defined in the
library defining either the class or the interface.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="accessing-members-of-interfaces">Accessing members of interfaces<a class="hash-link" href="#accessing-members-of-interfaces" title="Direct link to heading">​</a></h4><p>The methods of an interface implemented internally within the class definition
may be called with the
<a href="/carbon-lang/design/generics/terminology#simple-member-access">simple member access syntax</a>. Methods of
all implemented interfaces may be called with a
<a href="/carbon-lang/design/generics/terminology#qualified-member-access-expression">qualified member access expression</a>,
whether they are defined internally or externally.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">var song: Song;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// `song.Print()` is allowed, unlike `song.Play()`.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">song.Print();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// `Less` is defined in `Comparable`, which is</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// implemented externally for `Song`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">song.(Comparable.Less)(song);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Can also call `Print` using a qualified member</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// access expression, using the compound member access</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// syntax with the qualified name `Printable.Print`:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">song.(Printable.Print)();</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="type-of-types">Type-of-types<a class="hash-link" href="#type-of-types" title="Direct link to heading">​</a></h3><p>To type check a function, the compiler needs to be able to verify that uses of a
value match the capabilities of the value&#x27;s type. In <code>SortVector</code>, the parameter
<code>T</code> is a type, but that type is a generic parameter. That means that the
specific type value assigned to <code>T</code> is not known when type checking the
<code>SortVector</code> function. Instead it is the constraints on <code>T</code> that let the
compiler know what operations may be performed on values of type <code>T</code>. Those
constraints are represented by the type of <code>T</code>, a
<a href="/carbon-lang/design/generics/terminology#type-of-type"><strong><em>type-of-type</em></strong></a>.</p><p>In general, a type-of-type describes the capabilities of a type, while a type
defines specific implementations of those capabilities. An interface, like
<code>Comparable</code>, may be used as a type-of-type. In that case, the constraint on the
type is that it must implement the interface <code>Comparable</code>.</p><p>A type-of-type also defines a set of names and a mapping to corresponding
qualified names. Those names are used for
<a href="/carbon-lang/design/generics/terminology#simple-member-access">simple member lookup</a> in scopes where the
value of the type is not known, such as when the type is a generic parameter.</p><p>You may combine interfaces into new type-of-types using
<a href="#combining-interfaces">the <code>&amp;</code> operator</a> or
<a href="#named-constraints">named constraints</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="generic-functions">Generic functions<a class="hash-link" href="#generic-functions" title="Direct link to heading">​</a></h3><p>We want to be able to call generic functions just like ordinary functions, and
write generic function bodies like ordinary functions. There are only a few
differences, like that you can&#x27;t take the address of generic functions.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="deduced-parameters">Deduced parameters<a class="hash-link" href="#deduced-parameters" title="Direct link to heading">​</a></h4><p>This <code>SortVector</code> function is explicitly providing type information that is
already included in the type of the second argument. To eliminate the argument
at the call site, use a <em>deduced parameter</em>.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">fn SortVectorDeduced[T:! Comparable](a: Vector(T)*) { ... }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>T</code> parameter is defined in square brackets before the explicit parameter
list in parenthesis to indicate it should be deduced. This means you may call
the function without the type argument, just like the ordinary functions
<code>SortInt32Vector</code> or <code>SortStringVector</code>:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SortVectorDeduced(&amp;anIntVector);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// or</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SortVectorDeduced(&amp;aStringVector);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>and the compiler deduces that the <code>T</code> argument should be set to <code>i32</code> or
<code>String</code> from the type of the argument.</p><p>Deduced arguments are always determined from the call and its explicit
arguments. There is no syntax for specifying deduced arguments directly at the
call site.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// ERROR: can&#x27;t determine `U` from explicit parameters</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn Illegal[T:! Type, U:! Type](x: T) -&gt; U { ... }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="generic-type-parameters">Generic type parameters<a class="hash-link" href="#generic-type-parameters" title="Direct link to heading">​</a></h4><p>A function with a generic type parameter can have the same function body as an
unparameterized one.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">fn PrintIt[T:! Printable](p: T*) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  p-&gt;Print();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn PrintIt(p: Song*) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  p-&gt;Print();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Inside the function body, you can treat the generic type parameter just like any
other type. There is no need to refer to or access generic parameters
differently because they are defined as generic, as long as you only refer to
the names defined by <a href="#type-of-types">type-of-type</a> for the type parameter.</p><p>You may also refer to any of the methods of interfaces required by the
type-of-type using a
<a href="#accessing-members-of-interfaces">qualified member access expression</a>, as shown
in the following sections.</p><p>A function can have a mix of generic, template, and regular parameters.
Likewise, it&#x27;s allowed to pass a template or generic value to a generic or
regular parameter. <em>However, passing a generic value to a template parameter is
future work.</em></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="requiring-or-extending-another-interface">Requiring or extending another interface<a class="hash-link" href="#requiring-or-extending-another-interface" title="Direct link to heading">​</a></h3><p>Interfaces can require other interfaces be implemented:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">interface Equatable {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fn IsEqual[me: Self](rhs: Self) -&gt; Bool;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// `Iterable` requires that `Equatable` is implemented.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">interface Iterable {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  impl as Equatable;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fn Advance[addr me: Self*]();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>extends</code> keyword is used to <a href="/carbon-lang/design/generics/terminology#extending-an-interface">extend</a>
another interface. If interface <code>Derived</code> extends interface <code>Base</code>, <code>Base</code>&#x27;s
interface is both required and all its methods are included in <code>Derived</code>&#x27;s
interface.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// `Hashable` extends `Equatable`.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">interface Hashable {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  extends Equatable;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fn Hash[me: Self]() -&gt; u64;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// `Hashable` is equivalent to:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">interface Hashable {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  impl as Equatable;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  alias IsEqual = Equatable.IsEqual;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fn Hash[me: Self]() -&gt; u64;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>A type may implement the base interface implicitly by implementing all the
methods in the implementation of the derived interface.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">class Key {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  impl as Hashable {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn IsEqual[me: Key](rhs: Key) -&gt; Bool { ... }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn Hash[me: Key]() -&gt; u64 { ... }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // No need to separately implement `Equatable`.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var k: Key = ...;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">k.Hash();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">k.IsEqual(k);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="combining-interfaces">Combining interfaces<a class="hash-link" href="#combining-interfaces" title="Direct link to heading">​</a></h3><p>The <code>&amp;</code> operation on type-of-types allows you conveniently combine interfaces.
It gives you all the names that don&#x27;t conflict.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">interface Renderable {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fn GetCenter[me: Self]() -&gt; (i32, i32);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Draw the object to the screen</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fn Draw[me: Self]();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">interface EndOfGame {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fn SetWinner[addr me: Self*](player: i32);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Indicate the game was a draw</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fn Draw[addr me: Self*]();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn F[T:! Renderable &amp; EndOfGame](game_state: T*) -&gt; (i32, i32) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  game_state-&gt;SetWinner(1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  return game_state-&gt;Center();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Names with conflicts can be accessed using a
<a href="#accessing-members-of-interfaces">qualified member access expression</a>.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">fn BothDraws[T:! Renderable &amp; EndOfGame](game_state: T*) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  game_state-&gt;(Renderable.Draw)();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  game_state-&gt;(GameState.Draw)();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="named-constraints">Named constraints<a class="hash-link" href="#named-constraints" title="Direct link to heading">​</a></h4><p>You may also declare a new type-of-type directly using
<a href="/carbon-lang/design/generics/terminology#named-constraints">&quot;named constraints&quot;</a>. Named constraints can
express requirements that multiple interfaces be implemented, and give you
control over how name conflicts are handled. Named constraints have other
applications and capabilities not covered here.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">constraint Combined {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  impl as Renderable;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  impl as EndOfGame;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  alias Draw_Renderable = Renderable.Draw;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  alias Draw_EndOfGame = EndOfGame.Draw;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  alias SetWinner = EndOfGame.SetWinner;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn CallItAll[T:! Combined](game_state: T*, int winner) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  if (winner &gt; 0) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    game_state-&gt;SetWinner(winner);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    game_state-&gt;Draw_EndOfGame();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  game_state-&gt;Draw_Renderable();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Can still use a qualified member access expression</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // for names not defined in the named constraint.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  return game_state-&gt;(Renderable.Center)();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="type-erasure">Type erasure<a class="hash-link" href="#type-erasure" title="Direct link to heading">​</a></h4><p>Inside a generic function, the API of a type argument is
<a href="/carbon-lang/design/generics/terminology#type-erasure">erased</a> except for the names defined in the
type-of-type. An equivalent model is to say an
<a href="/carbon-lang/design/generics/terminology#archetype">archetype</a> is used for type checking and name lookup
when the actual type is not known in that scope. The archetype has members
dictated by the type-of-type.</p><p>For example: If there were a class <code>CDCover</code> defined this way:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">class CDCover  {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  impl as Printable {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>it can be passed to this <code>PrintIt</code> function:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">fn PrintIt[T:! Printable](p: T*) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  p-&gt;Print();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Inside <code>PrintIt</code>, <code>T</code> is an archetype with the API of <code>Printable</code>. A call to
<code>PrintIt</code> with a value of type <code>CDCover</code> erases everything except the members or
<code>Printable</code>. This includes the type connection to <code>CDCover</code>, so it is illegal to
cast from <code>T</code> to <code>CDCover</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="adapting-types">Adapting types<a class="hash-link" href="#adapting-types" title="Direct link to heading">​</a></h3><p>Carbon has a mechanism called <a href="/carbon-lang/design/generics/terminology#adapting-a-type">adapting types</a>)
to create new types that are <a href="/carbon-lang/design/generics/terminology#compatible-types">compatible</a> with
existing types but with different interface implementations. This could be used
to add or replace implementations, or define implementations for reuse.</p><p>In this example, we have multiple ways of sorting a collection of <code>Song</code> values.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">class Song { ... }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">adapter SongByArtist extends Song {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  impl as Comparable { ... }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">adapter SongByTitle extends Song {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  impl as Comparable { ... }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Values of type <code>Song</code> may be cast to <code>SongByArtist</code> or <code>SongByTitle</code> to get a
specific sort order.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="interface-input-and-output-types">Interface input and output types<a class="hash-link" href="#interface-input-and-output-types" title="Direct link to heading">​</a></h3><p><a href="/carbon-lang/design/generics/terminology#interface-type-parameters-and-associated-types">Associated types and interface parameters</a>
allow function signatures to vary with the implementing type. The biggest
difference between these is that associated types (&quot;output types&quot;) may be
deduced from a type, and types can implement the same interface multiple times
with different interface parameters (&quot;input types&quot;).</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="associated-types">Associated types<a class="hash-link" href="#associated-types" title="Direct link to heading">​</a></h4><p>Expect types that vary in an interface to be associated types by default. Since
associated types may be deduced, they are more convenient to use. Imagine a
<code>Stack</code> interface. Different types implementing <code>Stack</code> will have different
element types:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">interface Stack {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  let ElementType:! Movable;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fn Push[addr me: Self*](value: ElementType);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fn Pop[addr me: Self*]() -&gt; ElementType;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fn IsEmpty[addr me: Self*]() -&gt; Bool;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>ElementType</code> is an associated type of the interface <code>Stack</code>. Types that
implement <code>Stack</code> give <code>ElementType</code> a specific value of some type implementing
<code>Movable</code>. Functions that accept a type implementing <code>Stack</code> can deduce the
<code>ElementType</code> from the stack type.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// ✅ This is allowed, since the type of the stack will determine</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// `ElementType`.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn PeekAtTopOfStack[StackType:! Stack](s: StackType*)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -&gt; StackType.ElementType;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="parameterized-interfaces">Parameterized interfaces<a class="hash-link" href="#parameterized-interfaces" title="Direct link to heading">​</a></h4><p>Parameterized interfaces are commonly associated with overloaded operators.
Imagine an interface for determining if two values are equivalent that allows
those types to be different. An element in a hash map might have type
<code>Pair(String, i64)</code> that implements both <code>Equatable(String)</code> and
<code>Equatable(Pair(String, i64))</code>.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">interface Equatable(T:! Type) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fn IsEqual[me: Self](compare_to: T) -&gt; Bool;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>T</code> is a parameter to interface <code>Equatable</code>. A type can implement <code>Equatable</code>
multiple times as long as each time it is with a different value of the <code>T</code>
parameter. Functions may accept types implementing <code>Equatable(i32)</code> or
<code>Equatable(f32)</code>. Functions can&#x27;t accept types implementing <code>Equatable(T)</code> in
general, unless some other parameter determines <code>T</code>.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// ✅ This is allowed, since the value of `T` is determined by the</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// `v` parameter.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn FindInVector[T:! Type, U:! Equatable(T)](v: Vector(T), needle: U)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -&gt; Optional(i32);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ❌ This is forbidden. Since `U` could implement `Equatable`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// multiple times, there is no way to determine the value for `T`.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Contrast with `PeekAtTopOfStack` in the associated type example.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn CompileError[T:! Type, U:! Equatable(T)](x: U) -&gt; T;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="constraints">Constraints<a class="hash-link" href="#constraints" title="Direct link to heading">​</a></h3><p>Type-of-types can be further constrained using a <code>where</code> clause:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">fn FindFirstPrime[T:! Container where .Element == i32]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (c: T, i: i32) -&gt; Optional(i32) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // The elements of `c` have type `T.Element`, which is `i32`.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn PrintContainer[T:! Container where .Element is Printable](c: T) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // The type of the elements of `c` is not known, but we do know</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // that type satisfies the `Printable` interface.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Constraints limit the types that the generic function can operate on, but
increase the knowledge that may be used in the body of the function to operate
on values of those types.</p><p>Constraints are also used when implementing an interface to specify the values
of associated types (and other associated constants).</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">class Vector(T:! Movable) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  impl as Stack where .ElementType = T { ... }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="parameterized-impls">Parameterized impls<a class="hash-link" href="#parameterized-impls" title="Direct link to heading">​</a></h3><p>Implementations can be parameterized to apply to multiple types. Those
parameters can have constraints to restrict when the implementation applies.
When multiple implementations apply, there is a rule to pick which one is
considered the most specific:</p><ul><li>All type parameters in each <code>impl</code> declaration are replaced with question
marks <code>?</code>. This is called the type structure of the <code>impl</code> declaration.</li><li>Given two type structures, find the first difference when read from
left-to-right. The one with a <code>?</code> is less specific, the one with a concrete
type name in that position is more specific.</li><li>If there is more than one <code>impl</code> declaration with the most specific type
structure, pick the one listed first in the priority ordering.</li></ul><p>To ensure <a href="/carbon-lang/design/generics/goals#coherence">coherence</a>, an <code>impl</code> may only be declared in a
library defining some name from its type structure. If a library defines
multiple implementations with the same type structure, they must be listed in
priority order in a prioritization block.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="operator-overloading">Operator overloading<a class="hash-link" href="#operator-overloading" title="Direct link to heading">​</a></h3><p>To overload an operator, implement the corresponding interface from the standard
library. For example, to define how the unary <code>-</code> operator behaves for a type,
implement the <code>Negatable</code> interface for that type. The interfaces and rewrites
used for a given operator may be found in the
<a href="/carbon-lang/docs/design/expressions/README.md">expressions design</a>.</p><p>As a convenience, there is a shorcut for defining an implementation that
supports any type implicitly convertible to a specified type, using <code>like</code>:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Support multiplying values of type `Distance` with</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// values of type `f64` or any type implicitly</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// convertible to `f64`.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">external impl Distance as MultipliableWith(like f64) ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="future-work">Future work<a class="hash-link" href="#future-work" title="Direct link to heading">​</a></h2><ul><li>Functions should have a way to accept types that vary at runtime.</li><li>You should have the ability to mark entities as <code>upcoming</code> or <code>deprecated</code>
to support evolution.</li><li>There should be a way to define generic associated and higher-ranked/kinded
types.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="references">References<a class="hash-link" href="#references" title="Direct link to heading">​</a></h2><ul><li><a href="https://github.com/carbon-language/carbon-lang/pull/524" target="_blank" rel="noopener noreferrer">#524: Generics overview</a></li><li><a href="https://github.com/carbon-language/carbon-lang/pull/731" target="_blank" rel="noopener noreferrer">#731: Generics details 2: adapters, associated types, parameterized interfaces</a></li><li><a href="https://github.com/carbon-language/carbon-lang/pull/818" target="_blank" rel="noopener noreferrer">#818: Constraints for generics (generics details 3)</a></li><li><a href="https://github.com/carbon-language/carbon-lang/pull/920" target="_blank" rel="noopener noreferrer">#920: Generic parameterized impls (details 5)</a></li><li><a href="https://github.com/carbon-language/carbon-lang/pull/950" target="_blank" rel="noopener noreferrer">#950: Generic details 6: remove facets</a></li><li><a href="https://github.com/carbon-language/carbon-lang/pull/1013" target="_blank" rel="noopener noreferrer">#1013: Generics: Set associated constants using <code>where</code> constraints</a></li><li><a href="https://github.com/carbon-language/carbon-lang/pull/1084" target="_blank" rel="noopener noreferrer">#1084: Generics details 9: forward declarations</a></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/carbon-language/carbon-lang/blob/trunk/../docs/design/generics/overview.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/carbon-lang/design/generics/goals"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Generics: Goals</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/carbon-lang/design/generics/terminology"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Generics: Terminology</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#table-of-contents" class="table-of-contents__link toc-highlight">Table of contents</a></li><li><a href="#goals" class="table-of-contents__link toc-highlight">Goals</a></li><li><a href="#summary" class="table-of-contents__link toc-highlight">Summary</a></li><li><a href="#what-are-generics" class="table-of-contents__link toc-highlight">What are generics?</a><ul><li><a href="#interfaces" class="table-of-contents__link toc-highlight">Interfaces</a></li><li><a href="#implementing-interfaces" class="table-of-contents__link toc-highlight">Implementing interfaces</a></li><li><a href="#type-of-types" class="table-of-contents__link toc-highlight">Type-of-types</a></li><li><a href="#generic-functions" class="table-of-contents__link toc-highlight">Generic functions</a></li><li><a href="#requiring-or-extending-another-interface" class="table-of-contents__link toc-highlight">Requiring or extending another interface</a></li><li><a href="#combining-interfaces" class="table-of-contents__link toc-highlight">Combining interfaces</a></li><li><a href="#adapting-types" class="table-of-contents__link toc-highlight">Adapting types</a></li><li><a href="#interface-input-and-output-types" class="table-of-contents__link toc-highlight">Interface input and output types</a></li><li><a href="#constraints" class="table-of-contents__link toc-highlight">Constraints</a></li><li><a href="#parameterized-impls" class="table-of-contents__link toc-highlight">Parameterized impls</a></li><li><a href="#operator-overloading" class="table-of-contents__link toc-highlight">Operator overloading</a></li></ul></li><li><a href="#future-work" class="table-of-contents__link toc-highlight">Future work</a></li><li><a href="#references" class="table-of-contents__link toc-highlight">References</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/carbon-language/carbon-lang" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discord.gg/ZjVdShJDAs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/carbon-language/carbon-lang/blob/trunk/CODE_OF_CONDUCT.md" target="_blank" rel="noopener noreferrer" class="footer__link-item">Code of Conduct<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div></div></footer></div>
<script src="/carbon-lang/assets/js/runtime~main.256c0991.js"></script>
<script src="/carbon-lang/assets/js/main.5fcc8113.js"></script>
</body>
</html>