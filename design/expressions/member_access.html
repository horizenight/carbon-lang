<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-design docs-doc-id-expressions/member_access">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-rc.1">
<title data-rh="true">Qualified names and member access | Carbon Language</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://emlai.github.io/carbon-lang/design/expressions/member_access"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-design-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-design-current"><meta data-rh="true" property="og:title" content="Qualified names and member access | Carbon Language"><meta data-rh="true" name="description" content="&lt;!--"><meta data-rh="true" property="og:description" content="&lt;!--"><link data-rh="true" rel="icon" href="/carbon-lang/img/carbon-logo.png"><link data-rh="true" rel="canonical" href="https://emlai.github.io/carbon-lang/design/expressions/member_access"><link data-rh="true" rel="alternate" href="https://emlai.github.io/carbon-lang/design/expressions/member_access" hreflang="en"><link data-rh="true" rel="alternate" href="https://emlai.github.io/carbon-lang/design/expressions/member_access" hreflang="x-default"><link rel="stylesheet" href="/carbon-lang/assets/css/styles.009a6ecf.css">
<link rel="preload" href="/carbon-lang/assets/js/runtime~main.256c0991.js" as="script">
<link rel="preload" href="/carbon-lang/assets/js/main.5fcc8113.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/carbon-lang/"><div class="navbar__logo"><img src="/carbon-lang/img/carbon-logo.png" alt="Carbon Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/carbon-lang/img/carbon-logo.png" alt="Carbon Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Carbon Language</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/carbon-lang/design">Design</a><a class="navbar__item navbar__link" href="/carbon-lang/spec">Spec</a><a class="navbar__item navbar__link" href="/carbon-lang/project">Project</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/carbon-language/carbon-lang" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/carbon-lang/design">Language design</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/carbon-lang/design/aliases">Aliases</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/carbon-lang/design/blocks_and_statements">Blocks and statements</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/carbon-lang/design/classes">Classes</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/carbon-lang/design/code_and_name_organization">Code and name organization</a><button aria-label="Toggle the collapsible sidebar category &#x27;Code and name organization&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/carbon-lang/design/control_flow">Control flow</a><button aria-label="Toggle the collapsible sidebar category &#x27;Control flow&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/carbon-lang/design/expressions">Expressions</a><button aria-label="Toggle the collapsible sidebar category &#x27;Expressions&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/carbon-lang/design/expressions/arithmetic">Arithmetic</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/carbon-lang/design/expressions/as_expressions">`as` expressions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/carbon-lang/design/expressions/bitwise">Bitwise and shift operators</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/carbon-lang/design/expressions/comparison_operators">Comparison operators</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/carbon-lang/design/expressions/if">`if` expressions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/carbon-lang/design/expressions/implicit_conversions">Implicit conversions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/carbon-lang/design/expressions/logical_operators">Logical operators</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/carbon-lang/design/expressions/member_access">Qualified names and member access</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/carbon-lang/design/functions">Functions</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/carbon-lang/design/generics">Generics</a><button aria-label="Toggle the collapsible sidebar category &#x27;Generics&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/carbon-lang/design/interoperability">Bidirectional interoperability with C/C++</a><button aria-label="Toggle the collapsible sidebar category &#x27;Bidirectional interoperability with C/C++&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/carbon-lang/design/lexical_conventions">Lexical conventions</a><button aria-label="Toggle the collapsible sidebar category &#x27;Lexical conventions&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/carbon-lang/design/metaprogramming">Metaprogramming</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/carbon-lang/design/name_lookup">Name lookup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/carbon-lang/design/naming_conventions">Naming conventions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/carbon-lang/design/pattern_matching">Pattern matching</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/carbon-lang/design/primitive_types">Primitive types</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/carbon-lang/design/templates">Templates</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/carbon-lang/design/tuples">Tuples</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/carbon-lang/design/type_inference">Type inference</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/carbon-lang/design/variables">Variables</a></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/carbon-lang/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/carbon-lang/design/expressions"><span itemprop="name">Expressions</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Qualified names and member access</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Qualified names and member access</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="table-of-contents">Table of contents<a class="hash-link" href="#table-of-contents" title="Direct link to heading">‚Äã</a></h2><ul><li><a href="#overview">Overview</a></li><li><a href="#member-resolution">Member resolution</a><ul><li><a href="#package-and-namespace-members">Package and namespace members</a></li><li><a href="#lookup-within-values">Lookup within values</a><ul><li><a href="#templates-and-generics">Templates and generics</a></li><li><a href="#lookup-ambiguity">Lookup ambiguity</a></li></ul></li></ul></li><li><a href="#impl-lookup"><code>impl</code> lookup</a></li><li><a href="#instance-binding">Instance binding</a></li><li><a href="#non-instance-members">Non-instance members</a></li><li><a href="#non-vacuous-member-access-restriction">Non-vacuous member access restriction</a></li><li><a href="#precedence-and-associativity">Precedence and associativity</a></li><li><a href="#alternatives-considered">Alternatives considered</a></li><li><a href="#references">References</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a class="hash-link" href="#overview" title="Direct link to heading">‚Äã</a></h2><p>A <em>qualified name</em> is a <a href="/carbon-lang/design/lexical_conventions/words">word</a> that is preceded
by a period. The name is found within a contextually determined entity:</p><ul><li>In a member access expression, this is the entity preceding the period.</li><li>For a designator in a struct literal, the name is introduced as a member of
the struct type.</li></ul><p>A <em>member access expression</em> allows a member of a value, type, interface,
namespace, and so on to be accessed by specifying a qualified name for the
member.</p><p>A member access expression is either a <em>simple</em> member access expression of the
form:</p><ul><li><em>member-access-expression</em> ::= <em>expression</em> <code>.</code> <em>word</em></li></ul><p>or a <em>compound</em> member access of the form:</p><ul><li><em>member-access-expression</em> ::= <em>expression</em> <code>.</code> <code>(</code> <em>expression</em> <code>)</code></li></ul><p>Compound member accesses allow specifying a qualified member name.</p><p>For example:</p><div class="language-carbon codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-carbon codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">package Widgets api;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">interface Widget {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fn Grow[addr me: Self*](factor: f64);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class Cog {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  var size: i32;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fn Make(size: i32) -&gt; Self;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  impl as Widgets.Widget;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn GrowSomeCogs() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  var cog1: Cog = Cog.Make(1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  var cog2: Cog = cog1.Make(2);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  let cog1_size: i32 = cog1.size;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  cog1.Grow(1.5);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  cog2.(Cog.Grow)(cog1_size as f64);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  cog1.(Widget.Grow)(1.1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  cog2.(Widgets.Cog.(Widgets.Widget.Grow))(1.9);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>A member access expression is processed using the following steps:</p><ul><li>First, the word or parenthesized expression to the right of the <code>.</code> is
<a href="#member-resolution">resolved</a> to a specific member entity, called <code>M</code> in
this document.</li><li>Then, if necessary, <a href="#impl-lookup"><code>impl</code> lookup</a> is performed to map from a
member of an interface to a member of the relevant <code>impl</code>, potentially
updating <code>M</code>.</li><li>Then, if necessary, <a href="#instance-binding">instance binding</a> is performed to
locate the member subobject corresponding to a field name or to build a
bound method object, producing the result of the member access expression.</li><li>If <a href="#non-instance-members">instance binding is not performed</a>, the result is
<code>M</code>.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="member-resolution">Member resolution<a class="hash-link" href="#member-resolution" title="Direct link to heading">‚Äã</a></h2><p>The process of <em>member resolution</em> determines which member <code>M</code> a member access
expression is referring to.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="package-and-namespace-members">Package and namespace members<a class="hash-link" href="#package-and-namespace-members" title="Direct link to heading">‚Äã</a></h3><p>If the first operand is a package or namespace name, the expression must be a
simple member access expression. The <em>word</em> must name a member of that package
or namespace, and the result is the package or namespace member with that name.</p><p>An expression that names a package or namespace can only be used as the first
operand of a member access or as the target of an <code>alias</code> declaration.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">namespace MyNamespace;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn MyNamespace.MyFunction() {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ‚úÖ OK, can alias a namespace.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">alias MyNS = MyNamespace;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn CallMyFunction() { MyNS.MyFunction(); }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ‚ùå Error: a namespace is not a value.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let MyNS2:! auto = MyNamespace;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn CallMyFunction2() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // ‚ùå Error: cannot perform compound member access into a namespace.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  MyNamespace.(MyNamespace.MyFunction)();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="lookup-within-values">Lookup within values<a class="hash-link" href="#lookup-within-values" title="Direct link to heading">‚Äã</a></h3><p>When the first operand is not a package or namespace name, there are three
remaining cases we wish to support:</p><ul><li>The first operand is a value, and lookup should consider members of the
value&#x27;s type.</li><li>The first operand is a type, and lookup should consider members of that
type. For example, <code>i32.Least</code> should find the member constant <code>Least</code> of
the type <code>i32</code>.</li><li>The first operand is a type-of-type, and lookup should consider members of
that type-of-type. For example, <code>Addable.Add</code> should find the member
function <code>Add</code> of the interface <code>Addable</code>. Because a type-of-type is a type,
this is a special case of the previous bullet.</li></ul><p>Note that because a type is a value, and a type-of-type is a type, these cases
are overlapping and not entirely separable.</p><p>If any of the above lookups ever looks for members of a type parameter, it
should consider members of the type-of-type, treating the type parameter as an
archetype.</p><p><strong>Note:</strong> If lookup is performed into a type that involves a template parameter,
the lookup will be performed both in the context of the template definition and
in the context of the template instantiation, as described in
<a href="#templates-and-generics">templates and generics</a>.</p><p>For a simple member access, the word is looked up in the following types:</p><ul><li>If the first operand can be evaluated and evaluates to a type, that type.</li><li>If the type of the first operand can be evaluated, that type.</li><li>If the type of the first operand is a generic type parameter, and the type
of that generic type parameter can be evaluated, that type-of-type.</li></ul><p>The results of these lookups are <a href="#lookup-ambiguity">combined</a>.</p><p>For a compound member access, the second operand is evaluated as a constant to
determine the member being accessed. The evaluation is required to succeed and
to result in a member of a type or interface.</p><p>For example:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">interface Printable {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fn Print[me: Self]();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">external impl i32 as Printable;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class Point {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  var x: i32;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  var y: i32;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Internal impl injects the name `Print` into class `Point`.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  impl as Printable;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn PrintPointTwice() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  var p: Point = {.x = 0, .y = 0};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // ‚úÖ OK, `x` found in type of `p`, namely `Point`.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  p.x = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // ‚úÖ OK, `y` found in the type `Point`.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  p.(Point.y) = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // ‚úÖ OK, `Print` found in type of `p`, namely `Point`.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  p.Print();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // ‚úÖ OK, `Print` found in the type `Printable`.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  p.(Printable.Print)();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn GenericPrint[T:! Printable](a: T) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // ‚úÖ OK, type of `a` is the type parameter `T`;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // `Print` found in the type of `T`, namely `Printable`.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  a.Print();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn CallGenericPrint(p: Point) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  GenericPrint(p);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="templates-and-generics">Templates and generics<a class="hash-link" href="#templates-and-generics" title="Direct link to heading">‚Äã</a></h4><p>If the value or type of the first operand depends on a template or generic
parameter, the lookup is performed from a context where the value of that
parameter is unknown. Evaluation of an expression involving the parameter may
still succeed, but will result in a symbolic value involving that parameter.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">class GenericWrapper(T:! Type) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  var field: T;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn F[T:! Type](x: GenericWrapper(T)) -&gt; T {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // ‚úÖ OK, finds `GenericWrapper(T).field`.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  return x.field;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class TemplateWrapper(template T:! Type) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  var field: T;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn G[template T:! Type](x: TemplateWrapper(T)) -&gt; T {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // ü§∑ Not yet decided.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  return x.field;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p><strong>TODO:</strong> The behavior of <code>G</code> above is not yet fully decided. If class
templates can be specialized, then we cannot know the members of
<code>TemplateWrapper(T)</code> without knowing <code>T</code>, so this first lookup will find
nothing. In any case, as described below, the lookup will be performed again
when <code>T</code> is known.</p></blockquote><p>If the value or type depends on any template parameters, the lookup is redone
from a context where the values of those parameters are known, but where the
values of any generic parameters are still unknown. The lookup results from
these two contexts are <a href="#lookup-ambiguity">combined</a>.</p><p><strong>Note:</strong> All lookups are done from a context where the values of any generic
parameters that are in scope are unknown. Unlike for a template parameter, the
actual value of a generic parameter never affects the result of member
resolution.</p><div class="language-carbon codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-carbon codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">class Cowboy { fn Draw[me: Self](); }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">interface Renderable {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fn Draw[me: Self]();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">external impl Cowboy as Renderable { fn Draw[me: Self](); }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn DrawDirect(c: Cowboy) { c.Draw(); }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn DrawGeneric[T:! Renderable](c: T) { c.Draw(); }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn DrawTemplate[template T:! Renderable](c: T) { c.Draw(); }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn Draw(c: Cowboy) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // ‚úÖ Calls member of `Cowboy`.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  DrawDirect(c);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // ‚úÖ Calls member of `impl Cowboy as Renderable`.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  DrawGeneric(c);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // ‚ùå Error: ambiguous.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  DrawTemplate(c);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class RoundWidget {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  external impl as Renderable {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn Draw[me: Self]();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  alias Draw = Renderable.Draw;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class SquareWidget {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fn Draw[me: Self]() {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  external impl as Renderable {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    alias Draw = Self.Draw;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn DrawWidget(r: RoundWidget, s: SquareWidget) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // ‚úÖ OK, lookup in type and lookup in type-of-type find the same entity.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  DrawTemplate(r);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // ‚úÖ OK, lookup in type and lookup in type-of-type find the same entity.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  DrawTemplate(s);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // ‚úÖ OK, found in type.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  r.Draw();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  s.Draw();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="lookup-ambiguity">Lookup ambiguity<a class="hash-link" href="#lookup-ambiguity" title="Direct link to heading">‚Äã</a></h4><p>Multiple lookups can be performed when resolving a member access expression. If
more than one member is found, after performing <a href="#impl-lookup"><code>impl</code> lookup</a> if
necessary, the lookup is ambiguous, and the program is invalid. Similarly, if no
members are found, the program is invalid. Otherwise, the result of combining
the lookup results is the unique member that was found.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="impl-lookup"><code>impl</code> lookup<a class="hash-link" href="#impl-lookup" title="Direct link to heading">‚Äã</a></h2><p>When the second operand of a member access expression resolves to a member of an
interface <code>I</code>, and the first operand is a value other than a type-of-type,
<em><code>impl</code> lookup</em> is performed to map the member of the interface to the
corresponding member of the relevant <code>impl</code>. The member of the <code>impl</code> replaces
the member of the interface in all further processing of the member access
expression.</p><div class="language-carbon codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-carbon codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">interface Addable {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // #1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fn Add[me: Self](other: Self) -&gt; Self;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // #2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  default fn Sum[Seq:! Iterable where .ValueType = Self](seq: Seq) -&gt; Self {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class Integer {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  impl as Addable {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // #3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn Add[me: Self](other: Self) -&gt; Self;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // #4, generated from default implementation for #2.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // fn Sum[...](...);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn SumIntegers(v: Vector(Integer)) -&gt; Integer {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Member resolution resolves the name `Sum` to #2.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // `impl` lookup then locates the `impl Integer as Addable`,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // and determines that the member access refers to #4,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // which is then called.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  return Integer.Sum(v);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn AddTwoIntegers(a: Integer, b: Integer) -&gt; Integer {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Member resolution resolves the name `Add` to #1.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // `impl` lookup then locates the `impl Integer as Addable`,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // and determines that the member access refers to #3.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Finally, instance binding will be performed as described later.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // This can be written more verbosely and explicitly as any of:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // -   `return a.(Integer.Add)(b);`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // -   `return a.(Addable.Add)(b);`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // -   `return a.(Integer.(Addable.Add))(b);`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  return a.Add(b);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The type <code>T</code> that is expected to implement <code>I</code> depends on the first operand of
the member access expression, <code>V</code>:</p><ul><li>If <code>V</code> can be evaluated and evaluates to a type, then <code>T</code> is <code>V</code>.<div class="language-carbon codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-carbon codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// `V` is `Integer`. `T` is `V`, which is `Integer`.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Alias refers to #2.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">alias AddIntegers = Integer.Add;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li>Otherwise, <code>T</code> is the type of <code>V</code>.<div class="language-carbon codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-carbon codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">let a: Integer = {};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// `V` is `a`. `T` is the type of `V`, which is `Integer`.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// `a.Add` refers to #2.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let twice_a: Integer = a.Add(a);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul><p>The appropriate <code>impl T as I</code> implementation is located. The program is invalid
if no such <code>impl</code> exists. When <code>T</code> or <code>I</code> depends on a generic parameter, a
suitable constraint must be specified to ensure that such an <code>impl</code> will exist.
When <code>T</code> or <code>I</code> depends on a template parameter, this check is deferred until
the argument for the template parameter is known.</p><p><code>M</code> is replaced by the member of the <code>impl</code> that corresponds to <code>M</code>.</p><div class="language-carbon codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-carbon codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">interface I {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // #1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  default fn F[me: Self]() {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  let N:! i32;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class C {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  impl as I where .N = 5 {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // #2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn F[me: C]() {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// `V` is `I` and `M` is `I.F`. Because `V` is a type-of-type,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// `impl` lookup is not performed, and the alias binds to #1.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">alias A1 = I.F;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// `V` is `C` and `M` is `I.F`. Because `V` is a type, `impl`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// lookup is performed with `T` being `C`, and the alias binds to #2.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">alias A2 = C.F;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let c: C = {};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// `V` is `c` and `M` is `I.N`. Because `V` is a non-type, `impl`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// lookup is performed with `T` being the type of `c`, namely `C`, and</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// `M` becomes the associated constant from `impl C as I`.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// The value of `Z` is 5.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let Z: i32 = c.N;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><a href="#instance-binding">Instance binding</a> may also apply if the member is an
instance member.</p><div class="language-carbon codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-carbon codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">var c: C;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// `V` is `c` and `M` is `I.F`. Because `V` is not a type, `T` is the</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// type of `c`, which is `C`. `impl` lookup is performed, and `M` is</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// replaced with #2. Then instance binding is performed.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">c.F();</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Note:</strong> When an interface member is added to a class by an alias, <code>impl</code>
lookup is not performed as part of handling the alias, but will happen when
naming the interface member as a member of the class.</p><div class="language-carbon codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-carbon codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">interface Renderable {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // #1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fn Draw[me: Self]();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class RoundWidget {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  external impl as Renderable {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // #2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn Draw[me: Self]();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // `Draw` names the member of the `Renderable` interface.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  alias Draw = Renderable.Draw;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class SquareWidget {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // #3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fn Draw[me: Self]() {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  external impl as Renderable {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    alias Draw = Self.Draw;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn DrawWidget(r: RoundWidget, s: SquareWidget) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // ‚úÖ OK: In the inner member access, the name `Draw` resolves to the</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // member `Draw` of `Renderable`, #1, which `impl` lookup replaces with</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // the member `Draw` of `impl RoundWidget as Renderable`, #2.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // The outer member access then forms a bound member function that</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // calls #2 on `r`, as described in &quot;Instance binding&quot;.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  r.(RoundWidget.Draw)();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // ‚úÖ OK: In the inner member access, the name `Draw` resolves to the</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // member `Draw` of `SquareWidget`, #3.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // The outer member access then forms a bound member function that</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // calls #3 on `s`.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  s.(SquareWidget.Draw)();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // ‚ùå Error: In the inner member access, the name `Draw` resolves to the</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // member `Draw` of `SquareWidget`, #3.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // The outer member access fails because we can&#x27;t call</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // #3, `Draw[me: SquareWidget]()`, on a `RoundWidget` object `r`.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  r.(SquareWidget.Draw)();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // ‚ùå Error: In the inner member access, the name `Draw` resolves to the</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // member `Draw` of `Renderable`, #1, which `impl` lookup replaces with</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // the member `Draw` of `impl RoundWidget as Renderable`, #2.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // The outer member access fails because we can&#x27;t call</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // #2, `Draw[me: RoundWidget]()`, on a `SquareWidget` object `s`.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  s.(RoundWidget.Draw)();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">base class WidgetBase {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // ‚úÖ OK, even though `WidgetBase` does not implement `Renderable`.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  alias Draw = Renderable.Draw;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fn DrawAll[T:! Renderable](v: Vector(T)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for (var w: T in v) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // ‚úÖ OK. Unqualified lookup for `Draw` finds alias `WidgetBase.Draw`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // to `Renderable.Draw`, which does not perform `impl` lookup yet.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // Then the compound member access expression performs `impl` lookup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // into `impl T as Renderable`, since `T` is known to implement</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // `Renderable`. Finally, the member function is bound to `w` as</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // described in &quot;Instance binding&quot;.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      w.(Draw)();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // ‚ùå Error: `Self.Draw` performs `impl` lookup, which fails</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // because `WidgetBase` does not implement `Renderable`.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      w.(Self.Draw)();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class TriangleWidget extends WidgetBase {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  external impl as Renderable;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn DrawTriangle(t: TriangleWidget) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // ‚úÖ OK: name `Draw` resolves to `Draw` member of `WidgetBase`, which</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // is `Renderable.Draw`. Then impl lookup replaces that with `Draw`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // member of `impl TriangleWidget as Renderable`.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  t.Draw();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="instance-binding">Instance binding<a class="hash-link" href="#instance-binding" title="Direct link to heading">‚Äã</a></h2><p>If member resolution and <code>impl</code> lookup produce a member <code>M</code> that is an instance
member -- that is, a field or a method -- and the first operand <code>V</code> of <code>.</code> is a
value other than a type, then <em>instance binding</em> is performed, as follows:</p><ul><li><p>For a field member in class <code>C</code>, <code>V</code> is required to be of type <code>C</code> or of a
type derived from <code>C</code>. The result is the corresponding subobject within <code>V</code>.
The result is an lvalue if <code>V</code> is an lvalue.</p><div class="language-carbon codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-carbon codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">var dims: auto = {.width = 1, .height = 2};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// `dims.width` denotes the field `width` of the object `dims`.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Print(dims.width);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// `dims` is an lvalue, so `dims.height` is an lvalue.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dims.height = 3;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>For a method, the result is a <em>bound method</em>, which is a value <code>F</code> such that
a function call <code>F(args)</code> behaves the same as a call to <code>M(args)</code> with the
<code>me</code> parameter initialized by a corresponding recipient argument:</p><ul><li>If the method declares its <code>me</code> parameter with <code>addr</code>, the recipient
argument is <code>&amp;V</code>.</li><li>Otherwise, the recipient argument is <code>V</code>.</li></ul><div class="language-carbon codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-carbon codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">class Blob {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fn Mutate[addr me: Self*](n: i32);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn F(p: Blob*) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // ‚úÖ OK, forms bound method `((*p).M)` and calls it.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // This calls `Blob.Mutate` with `me` initialized by `&amp;(*p)`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // and `n` initialized by `5`.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (*p).Mutate(5);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // ‚úÖ OK, same as above.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  let bound_m: auto = (*p).Mutate;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  bound_m(5);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="non-instance-members">Non-instance members<a class="hash-link" href="#non-instance-members" title="Direct link to heading">‚Äã</a></h2><p>If instance binding is not performed, the result is the member <code>M</code> determined by
member resolution and <code>impl</code> lookup. Evaluating the member access expression
evaluates <code>V</code> and discards the result.</p><p>An expression that names an instance member, but for which instance binding is
not performed, can only be used as the second operand of a compound member
access or as the target of an <code>alias</code> declaration.</p><div class="language-carbon codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-carbon codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">class C {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fn StaticMethod();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  var field: i32;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  class Nested {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn CallStaticMethod(c: C) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // ‚úÖ OK, calls `C.StaticMethod`.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  C.StaticMethod();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // ‚úÖ OK, evaluates expression `c` then calls `C.StaticMethod`.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  c.StaticMethod();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // ‚ùå Error: name of instance member `C.field` can only be used in a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // member access or alias.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  C.field = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // ‚úÖ OK, instance binding is performed by outer member access,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // same as `c.field = 1;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  c.(C.field) = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // ‚úÖ OK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  let T:! Type = C.Nested;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // ‚ùå Error: value of `:!` binding is not constant because it</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // refers to local variable `c`.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  let U:! Type = c.Nested;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="non-vacuous-member-access-restriction">Non-vacuous member access restriction<a class="hash-link" href="#non-vacuous-member-access-restriction" title="Direct link to heading">‚Äã</a></h2><p>The first operand of a member access expression must be used in some way: a
compound member access must result in <code>impl</code> lookup, instance binding, or both.
In a simple member access, this always holds, because the first operand is
always used for lookup.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">interface Printable {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fn Print[me: Self]();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">external impl i32 as Printable {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fn Print[me: Self]();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn MemberAccess(n: i32) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // ‚úÖ OK: `Printable.Print` is the interface member.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // `i32.(Printable.Print)` is the corresponding member of the `impl`.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // `n.(i32.(Printable.Print))` is a bound member function naming that member.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  n.(i32.(Printable.Print))();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // ‚úÖ Same as above, `n.(Printable.Print)` is effectively interpreted as</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // `n.(T.(Printable.Print))()`, where `T` is the type of `n`,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // because `n` does not evaluate to a type. Performs impl lookup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // and then instance binding.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  n.(Printable.Print)();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ‚úÖ OK, member `Print` of interface `Printable`.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">alias X1 = Printable.Print;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ‚ùå Error, compound access doesn&#x27;t perform impl lookup or instance binding.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">alias X2 = Printable.(Printable.Print);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ‚úÖ OK, member `Print` of `impl i32 as Printable`.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">alias X3 = i32.(Printable.Print);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ‚ùå Error, compound access doesn&#x27;t perform impl lookup or instance binding.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">alias X4 = i32.(i32.(Printable.Print));</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="precedence-and-associativity">Precedence and associativity<a class="hash-link" href="#precedence-and-associativity" title="Direct link to heading">‚Äã</a></h2><p>Member access expressions associate left-to-right:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">class A {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  class B {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn F();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">interface B {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fn F();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">external impl A as B;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn Use(a: A) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Calls member `F` of class `A.B`.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (a.B).F();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Calls member `F` of interface `B`, as implemented by type `A`.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  a.(B.F)();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Same as `(a.B).F()`.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  a.B.F();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Member access has lower precedence than primary expressions, and higher
precedence than all other expression forms.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// ‚úÖ OK, `*` has lower precedence than `.`. Same as `(A.B)*`.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var p: A.B*;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ‚úÖ OK, `1 + (X.Y)` not `(1 + X).Y`.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var n: i32 = 1 + X.Y;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="alternatives-considered">Alternatives considered<a class="hash-link" href="#alternatives-considered" title="Direct link to heading">‚Äã</a></h2><ul><li><a href="/carbon-lang/proposals/p0989.md#separate-syntax-for-static-versus-dynamic-access">Separate syntax for static versus dynamic access, such as <code>::</code> versus <code>.</code></a></li><li><a href="/carbon-lang/proposals/p0989.md#use-a-different-lookup-rule-in-templates">Use a different lookup rule for names in templates</a></li><li><a href="/carbon-lang/proposals/p0989.md#meaning-of-typeinterface">Meaning of <code>Type.Interface</code></a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="references">References<a class="hash-link" href="#references" title="Direct link to heading">‚Äã</a></h2><ul><li>Proposal
<a href="https://github.com/carbon-language/carbon-lang/pull/989" target="_blank" rel="noopener noreferrer">#989: member access expressions</a></li><li><a href="https://github.com/carbon-language/carbon-lang/issues/949" target="_blank" rel="noopener noreferrer">Question for leads: constrained template name lookup</a></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/carbon-language/carbon-lang/blob/trunk/../docs/design/expressions/member_access.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/carbon-lang/design/expressions/logical_operators"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Logical operators</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/carbon-lang/design/functions"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Functions</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#table-of-contents" class="table-of-contents__link toc-highlight">Table of contents</a></li><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#member-resolution" class="table-of-contents__link toc-highlight">Member resolution</a><ul><li><a href="#package-and-namespace-members" class="table-of-contents__link toc-highlight">Package and namespace members</a></li><li><a href="#lookup-within-values" class="table-of-contents__link toc-highlight">Lookup within values</a></li></ul></li><li><a href="#impl-lookup" class="table-of-contents__link toc-highlight"><code>impl</code> lookup</a></li><li><a href="#instance-binding" class="table-of-contents__link toc-highlight">Instance binding</a></li><li><a href="#non-instance-members" class="table-of-contents__link toc-highlight">Non-instance members</a></li><li><a href="#non-vacuous-member-access-restriction" class="table-of-contents__link toc-highlight">Non-vacuous member access restriction</a></li><li><a href="#precedence-and-associativity" class="table-of-contents__link toc-highlight">Precedence and associativity</a></li><li><a href="#alternatives-considered" class="table-of-contents__link toc-highlight">Alternatives considered</a></li><li><a href="#references" class="table-of-contents__link toc-highlight">References</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/carbon-language/carbon-lang" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discord.gg/ZjVdShJDAs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/carbon-language/carbon-lang/blob/trunk/CODE_OF_CONDUCT.md" target="_blank" rel="noopener noreferrer" class="footer__link-item">Code of Conduct<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div></div></footer></div>
<script src="/carbon-lang/assets/js/runtime~main.256c0991.js"></script>
<script src="/carbon-lang/assets/js/main.5fcc8113.js"></script>
</body>
</html>